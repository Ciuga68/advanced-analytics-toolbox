"use strict";define(["../chart/line_chart","../util/utils","ng!$q"],function(e,t,a){return{createCube:function(e,a){var n=a.layout,s=t.validateDimension(n.props.dimensions[0]),i=[{qNullSuppression:!0,qDef:{qFieldDefs:[s]}}],r=t.validateMeasure(n.props.measures[0])+" as mea0, "+t.validateDimension(n.props.dimensions[1])+" as dim1",o="q$mea0 ~ q$dim1";a.dataTitle=t.validateDimension(n.props.dimensions[1]);var d="NS";t.displayDebugModeMessage(n.props.debugMode);var l=t.getDebugSaveDatasetScript(n.props.debugMode,"debug_tukey.rda"),p="R.ScriptEvalExStr('"+d+"','"+l+" library(jsonlite); res<-TukeyHSD(aov("+o+"), conf.level="+n.props.confidenceLevel+"); json<-toJSON(list(rownames(res[[1]]), res[[1]])); json;', "+r+")";t.displayRScriptsToConsole(n.props.debugMode,[p]);var q=[{qDef:{qLabel:"Results",qDef:p}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}}];return a.backendApi.applyPatches([{qPath:"/qHyperCubeDef/qDimensions",qOp:"replace",qValue:JSON.stringify(i)},{qPath:"/qHyperCubeDef/qMeasures",qOp:"replace",qValue:JSON.stringify(q)}],!1),a.patchApplied=!0,null},drawChart:function(e){var n=a.defer(),s=e.layout,i=(t.validateDimension(s.props.dimensions[1]),[{qTop:0,qLeft:0,qWidth:6,qHeight:1}]);return e.backendApi.getData(i).then(function(a){e.layout.qHyperCube.qMeasureInfo;if(0===a[0].qMatrix[0][1].qText.length||"-"==a[0].qMatrix[0][1].qText)t.displayConnectionError(e.extId);else{t.displayReturnedDatasetToConsole(s.props.debugMode,a[0]);for(var i=JSON.parse(a[0].qMatrix[0][1].qText),r=i[0],o=i[1],d="\n            <h2>Tukey multiple comparisons of means</h2>\n            <div>"+100*s.props.confidenceLevel+'% family-wise confidence level</div>\n            <table class="simple">\n              <thead>\n                <tr>\n                  </th><th><th>diff</th><th>lwr</th><th>upr</th><th>p adj</th>\n                </tr>\n              </thead>\n              <tbody>\n         ',l=0;l<r.length;l++)d+="\n              <tr><td>"+r[l]+"</td><td>"+o[l][0]+"</td><td>"+o[l][1]+"</td><td>"+o[l][2]+"</td><td>"+o[l][3]+"</td></tr>\n            ";d+="\n              </tbody>\n            </table>\n          ",$(".advanced-analytics-toolsets-"+e.extId).html(d)}return n.resolve()}),n.promise}}});
//# sourceMappingURL=../../maps/analysis/tukey.js.map
