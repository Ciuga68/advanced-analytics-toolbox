"use strict";define(["../chart/line_chart","../util/utils","ng!$q"],function(e,t,n){return{createCube:function(e,n){var a=n.layout,i=t.validateDimension(a.props.dimensions[0]),r=[{qDef:{qFieldDefs:[i]}}],s=t.validateMeasure(a.props.measures[0])+" as mea0, "+t.validateDimension(a.props.dimensions[1])+" as dim1",l="q$mea0 ~ q$dim1";n.dataTitle=t.validateDimension(a.props.dimensions[1]);var o="NS",d=[{qDef:{qLabel:"Results",qDef:"R.ScriptEvalExStr('"+o+"','library(jsonlite); res<-TukeyHSD(aov("+l+"), conf.level="+a.props.confidenceLevel+"); json<-toJSON(list(rownames(res[[1]]), res[[1]])); json;', "+s+")"}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}}];return n.backendApi.applyPatches([{qPath:"/qHyperCubeDef/qDimensions",qOp:"replace",qValue:JSON.stringify(r)},{qPath:"/qHyperCubeDef/qMeasures",qOp:"replace",qValue:JSON.stringify(d)}],!1),n.patchApplied=!0,null},drawChart:function(e){var a=n.defer(),i=e.layout,r=(t.validateDimension(i.props.dimensions[1]),[{qTop:0,qLeft:0,qWidth:6,qHeight:1}]);return e.backendApi.getData(r).then(function(n){e.layout.qHyperCube.qMeasureInfo;if(0===n[0].qMatrix[0][1].qText.length||"-"==n[0].qMatrix[0][1].qText)t.displayConnectionError(e.extId);else{for(var r=JSON.parse(n[0].qMatrix[0][1].qText),s=r[0],l=r[1],o="\n            <h2>Tukey multiple comparisons of means</h2>\n            <div>"+100*i.props.confidenceLevel+'% family-wise confidence level</div>\n            <table class="simple">\n              <thead>\n                <tr>\n                  </th><th><th>diff</th><th>lwr</th><th>upr</th><th>p adj</th>\n                </tr>\n              </thead>\n              <tbody>\n         ',d=0;d<s.length;d++)o+="\n              <tr><td>"+s[d]+"</td><td>"+l[d][0]+"</td><td>"+l[d][1]+"</td><td>"+l[d][2]+"</td><td>"+l[d][3]+"</td></tr>\n            ";o+="\n              </tbody>\n            </table>\n          ",$(".advanced-analytics-toolsets-"+e.extId).html(o)}return a.resolve()}),a.promise}}});
//# sourceMappingURL=../../maps/analysis/tukey.js.map
