"use strict";define(["../util/utils","ng!$q"],function(e,t){return{createCube:function(t,a){var n=a.layout,i=e.validateDimension(n.props.dimensions[0]),s=[{qDef:{qFieldDefs:[i]}}],r=e.validateMeasure(n.props.measures[0])+" as mea0, "+e.validateDimension(n.props.dimensions[1])+" as dim1",l="q$mea0 ~ q$dim1";a.dataTitle=e.validateDimension(n.props.dimensions[1]);var o="NS",d=[{qDef:{qLabel:"Results",qDef:"R.ScriptEvalExStr('"+o+"','library(jsonlite); res<-summary(aov("+l+")); json<-toJSON(res[[1]]); json;', "+r+")"}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}},{qDef:{qLabel:"-",qDef:""}}];return a.backendApi.applyPatches([{qPath:"/qHyperCubeDef/qDimensions",qOp:"replace",qValue:JSON.stringify(s)},{qPath:"/qHyperCubeDef/qMeasures",qOp:"replace",qValue:JSON.stringify(d)}],!1),a.patchApplied=!0,null},drawChart:function(a){var n=t.defer(),i=a.layout,s=e.validateDimension(i.props.dimensions[1]),r=[{qTop:0,qLeft:0,qWidth:6,qHeight:1}];return a.backendApi.getData(r).then(function(t){t[0].qMatrix,a.layout.qHyperCube.qMeasureInfo;if(0===t[0].qMatrix[0][1].qText.length||"-"==t[0].qMatrix[0][1].qText)e.displayConnectionError(a.extId);else{for(var i=JSON.parse(t[0].qMatrix[0][1].qText),r='\n            <h2>ANOVA - Single factor</h2>\n            <table class="simple">\n              <thead>\n                <tr>\n                  </th><th><th>Df</th><th>Sum Sq</th><th>Mean Sq</th><th>F value</th><th>Pr(>F)</th><th></th>\n                </tr>\n              </thead>\n              <tbody>\n         ',l=[s,"Residuals"],o=0;o<l.length;o++)r+="\n              <tr><td>"+l[o]+"</td><td>"+i[o].Df+"</td><td>"+i[o]["Sum Sq"]+"</td><td>"+i[o]["Mean Sq"]+"</td><td>"+("undefined"!=typeof i[o]["F value"]?i[o]["F value"]:"")+"</td><td>"+("undefined"!=typeof i[o]["Pr(>F)"]?i[o]["Pr(>F)"]:"")+"</td>\n              <td>"+(i[o]["Pr(>F)"]<.001?'<span class="lui-icon  lui-icon--star"></span><span class="lui-icon  lui-icon--star"></span><span class="lui-icon  lui-icon--star"></span>':i[o]["Pr(>F)"]<.01?'<span class="lui-icon  lui-icon--star"></span><span class="lui-icon  lui-icon--star"></span>':i[o]["Pr(>F)"]<.05?'<span class="lui-icon  lui-icon--star"></span>':i[o]["Pr(>F)"]<.1?".":"")+"</td>\n              </tr>";r+="\n              </tbody>\n            </table>\n            <div>Signif. codes: 0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</div>\n          ",$(".advanced-analytics-toolsets-"+a.extId).html(r)}return n.resolve()}),n.promise}}});
//# sourceMappingURL=../../maps/analysis/anova.js.map
